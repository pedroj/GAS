# This program was generated by "Generative Art Synthesizer" 
# Generation date: 2021-11-28 02:06:28 UTC 
# GAS change date: 2021-11-28 01:31:12 UTC 
# GAS md5 hash: c291ffb9de6ad6dea37797c00163f591 
# Python version: 3.7.9 (tags/v3.7.9:13c94747c7, Aug 17 2020, 18:58:18) [MSC v.1900 64 bit (AMD64)] 
# For more information visit: https://github.com/volotat/GAS

#import python libraries 
import os #OS version: default 
import numpy as np #Numpy version: 1.19.5 
from PIL import Image #PIL version: 8.1.2 

#set initial params
SIZE = 768 
GRID_CHANNELS = 30 

def test_values(arr):
    if np.isnan(arr).any():
        raise Exception('Array has None elements!') 
        
    if np.amin(arr) < -1 or np.amax(arr) > 1:
        raise Exception('Values went to far! [ %.2f : %.2f ]'%(np.amin(arr), np.amax(arr)) ) 
           
    return arr

#define grid transformation methods

def transit(x, t_indx, s_indx, alphas):
    res = x.copy()
    res[:,:,t_indx] = np.sum(x[:,:,s_indx] * alphas, axis = -1)
    return test_values(res.clip(-1,1)) 

def sin(x, t_indx, s_indx, scale = 1, shift = 0): 
    res = x.copy()
    res[:,:,t_indx] = np.sin(x[:,:,s_indx] * 0.5 * np.pi * scale + shift)
    return test_values(res)     

def power(x, t_indx, s_indx, p = 1): 
    res = x.copy()
    res[:,:,t_indx] = np.sign(x[:,:,s_indx]) * np.abs(x[:,:,s_indx]) ** p 
    return test_values(res)   

def magnitude(x, t_indx, s_indx, ord = 2): 
    res = x.copy()
    res[:,:,t_indx] = np.linalg.norm(x[:,:,s_indx], axis = -1, ord = ord) / np.sqrt(len(s_indx))
    return test_values(res)   

#set initial grid
grid = np.zeros((SIZE, SIZE, GRID_CHANNELS))

x = ((np.arange(SIZE)/(SIZE-1) - 0.5) * 2).reshape((1, SIZE)).repeat(SIZE, 0)
y = ((np.arange(SIZE)/(SIZE-1) - 0.5) * 2).reshape((SIZE, 1)).repeat(SIZE, 1)

phi = np.pi / 4
rx = (x * np.cos(phi) - y * np.sin(phi)) / 1.5
ry = (x * np.cos(phi) + y * np.sin(phi)) / 1.5


for i in range(15):
    grid[:,:,i * 2 + 0] = x
    grid[:,:,i * 2 + 1] = y

#apply transformations to the grid
grid = transit(grid, 29, [19, 22], [0.162570065071097, 0.837429934928903])
grid = magnitude(grid, 12, [27, 0, 11, 8, 21, 25, 22], 2)
grid = power(grid, 16, 19, 0.6832593210243594)
grid = magnitude(grid, 5, [12, 29, 19, 16, 25, 5, 22, 20, 13, 18, 2, 17, 1, 7], 2)
grid = transit(grid, 19, [29, 17, 18, 24, 6, 12, 13, 11, 8, 20, 0], [0.11956496211881872, 0.05013356366149157, 0.13305054541369926, 0.15246500360275328, 0.05802002562963354, 0.04238582486905315, 0.19554926469073888, 0.08033490218765624, 0.04525393101315875, 0.03341790476201002, 0.08982407205098653])
grid = sin(grid, 29, 4, -2.803277175027569, 43.39456443062289)
grid = sin(grid, 23, 24, 2.0425954175290886, 11.358624030534827)
grid = magnitude(grid, 24, [0, 5, 18, 17, 29, 1, 10, 11, 14], 2)
grid = sin(grid, 3, 16, 0.08116001882496733, 29.607535899235273)
grid = transit(grid, 9, [24, 19], [0.14255129423463317, 0.8574487057653668])
grid = sin(grid, 3, 12, -2.4201168205485177, -42.76220889484386)
grid = transit(grid, 23, [0, 17, 16, 10, 1, 29, 12, 24, 11, 6, 23, 14, 2, 3], [0.04185852737464411, 0.0718958562209562, 0.04144628951866288, 0.06440992347220259, 0.05504490607061211, 0.06002707501087633, 0.14086245922498628, 0.05953422331122396, 0.13174771512588848, 0.09554676788043852, 0.054710845949554616, 0.07072254937205642, 0.046008773998673064, 0.06618408746922441])
grid = sin(grid, 28, 4, -1.1167240340353377, -33.51597872481756)
grid = sin(grid, 6, 16, -5.309685991010303, -73.84592367786468)
grid = sin(grid, 9, 23, -2.6796169840930895, -40.5412027819841)
grid = sin(grid, 15, 6, 1.6192227145410403, 18.29042695814111)
grid = sin(grid, 27, 3, 3.67033472109074, -92.21663905335483)
grid = transit(grid, 3, [4, 7, 29], [0.3386535705350276, 0.5538253330679384, 0.10752109639703403])
grid = sin(grid, 12, 28, 3.3754171464010443, 72.59735794386486)
grid = sin(grid, 28, 23, 3.9592736322225717, -28.872965332555125)
grid = magnitude(grid, 23, [16, 3, 27, 0, 21], 2)
grid = transit(grid, 14, [12, 6, 0, 10], [0.030935598884591263, 0.5285731990934327, 0.3402810463602381, 0.10021015566173799])
grid = transit(grid, 22, [19, 7, 5, 29, 6, 26], [0.14337063648845627, 0.24142817057917984, 0.11685279951452533, 0.023075679344775824, 0.2754286905791286, 0.19984402349393413])
grid = sin(grid, 26, 6, -2.4091211781495296, -82.64154311894532)
grid = magnitude(grid, 14, [3, 10, 14, 23, 26, 21, 20, 13, 17], 2)
grid = magnitude(grid, 7, [23, 6, 2], 2)
grid = sin(grid, 10, 22, 2.050315504251981, 89.5744631928493)
grid = transit(grid, 20, [25, 29, 1, 6, 12, 8, 14, 17, 23], [0.004899579789304808, 0.09314319527557183, 0.03998202780338693, 0.19272244068492897, 0.34501737224324885, 0.17740036381342622, 0.06353176938513716, 0.03203715570193849, 0.05126609530305695])
grid = sin(grid, 11, 20, 4.390960200726324, -71.44216611954899)
grid = magnitude(grid, 7, [20, 16, 1, 25, 13], 2)
grid = magnitude(grid, 22, [20, 27, 16, 11, 23, 15, 29, 25, 0, 17, 2, 5, 1, 28, 12], 2)
grid = transit(grid, 19, [20, 4, 3, 16], [0.1526830825248949, 0.7081439352898777, 0.06775906310079587, 0.07141391908443141])
grid = sin(grid, 26, 26, -3.0877394923548906, 44.03402898112404)
grid = transit(grid, 23, [15, 24, 12, 22, 19, 23], [0.2974634270268527, 0.18571837778194167, 0.22122718321511456, 0.05894778995186554, 0.19810172312674557, 0.03854149889747992])
grid = sin(grid, 11, 9, 1.0239782977935226, 65.26260230502231)
grid = sin(grid, 9, 25, -7.566790267054586, -75.63082272426975)
grid = transit(grid, 15, [9, 15, 26, 2, 24, 28, 19, 12, 5, 13, 1, 4, 16, 23, 20, 6, 10, 18], [0.06616516411967799, 0.09777590819145016, 0.0002712313941477737, 0.09746330541437898, 0.005397802149808619, 0.07718643014961299, 0.13148160411157372, 0.09102197762563803, 0.03185803109227711, 0.0241181740051075, 0.034195430141271195, 0.03951611394918786, 0.0787746792428292, 0.03692743163524459, 0.002994098366014297, 0.062803596094192, 0.08020173317182712, 0.041847289145760795])
grid = transit(grid, 4, [25, 29, 22, 1, 6, 9, 19, 21, 18, 16, 17, 5, 20, 0, 12], [0.08432611754036021, 0.009140664239356671, 0.08060088757913146, 0.06166245074953199, 0.1638729657005139, 0.034479801216239156, 0.014854982191717304, 0.08772065521432443, 0.043708056308515354, 0.11043876578842901, 0.12519722186516116, 0.023175558417975587, 0.01018347967163066, 0.1176477109575453, 0.032990682559567955])
grid = sin(grid, 12, 7, -1.7660206046047084, -85.28896741511835)
grid = transit(grid, 14, [18, 28, 1, 25, 26, 15, 16, 19, 12, 14, 5, 8], [0.061399029075051736, 0.16128653484720623, 0.04238018700257984, 0.07363074210463408, 0.09276563659827074, 0.044181324827153534, 0.1458446676143112, 0.002814862772849515, 0.12681141102429905, 0.09165683421119886, 0.05453631469851343, 0.10269245522393174])
grid = power(grid, 28, 29, 0.3779782940331584)
grid = sin(grid, 19, 27, -2.5705555933884487, 80.63298070706631)
grid = transit(grid, 25, [0, 5, 12, 29, 27, 7, 2, 25, 18, 8], [0.13649589534415188, 0.014678989258920187, 0.07847237192131681, 0.11124864055343385, 0.08219416634833716, 0.04507998114443801, 0.1618879569706191, 0.2700382467691338, 0.05609092564881936, 0.043812826040829804])
grid = sin(grid, 27, 5, 2.9386845297236146, -8.401158648822786)
grid = transit(grid, 9, [29, 10, 7, 18, 25, 11, 16, 21], [0.029167418654736797, 0.003595910474137072, 0.29287241571346795, 0.07022515471929672, 0.10158497813413986, 0.059246305191391915, 0.32077383459013076, 0.12253398252269886])
grid = power(grid, 4, 27, 2.403332922052619)
grid = sin(grid, 12, 27, -6.706458142837571, -67.86915645909208)
grid = sin(grid, 12, 16, -2.708811323493574, 61.963825635946876)
grid = sin(grid, 27, 21, 2.979990355413568, 55.608556726719144)
grid = transit(grid, 10, [25, 12], [0.917610969357756, 0.08238903064224394])
grid = sin(grid, 7, 7, 1.3211939890122422, 72.76020788877838)
grid = sin(grid, 14, 4, 0.5306507527772861, 80.17684312260022)
grid = sin(grid, 3, 10, -0.5503493938868814, -5.962185131409427)
grid = transit(grid, 15, [25, 28, 1, 5], [0.321600534827853, 0.10542445081098709, 0.3304333599084767, 0.2425416544526832])
grid = magnitude(grid, 20, [6, 9], 2)
grid = sin(grid, 18, 25, 1.3894004680099752, 89.25662087299591)
grid = transit(grid, 20, [4, 17, 22, 9, 2, 3], [0.28470977015474064, 0.11783602510587528, 0.14947881924125034, 0.07641898119264072, 0.299966212618196, 0.07159019168729713])
grid = sin(grid, 2, 12, -0.5867291269053801, 28.167611255741008)
grid = transit(grid, 16, [17, 27, 6, 23, 19, 25, 16, 9, 14, 4, 0], [0.10447719623269758, 0.048407918591629864, 0.007763166119990237, 0.0022140470040574907, 0.24849459533294363, 0.12023286519064905, 0.17871974770364935, 0.05735132208762337, 0.036326220968249515, 0.10867143758787537, 0.08734148318063453])
grid = transit(grid, 1, [7, 23, 26, 14, 20, 19, 28, 8, 9, 17, 22, 0, 5], [0.013121733291342785, 0.11301130736686454, 0.01352586294053668, 0.15913305810858402, 0.11915145281306491, 0.0006517312319511964, 0.008548387417477, 0.0904394241347426, 0.01789058436883307, 0.07037753745683703, 0.07076335166856433, 0.07800578985114522, 0.24537977935005661])
grid = sin(grid, 18, 28, -1.9841443767920823, -69.03014320058003)
grid = transit(grid, 5, [22, 19, 25, 27, 20, 21, 18, 3], [0.13269119455929568, 0.13927419514581135, 0.2353360212273103, 0.05358973946883631, 0.11709248299854554, 0.05695975943841826, 0.03345046365270227, 0.2316061435090803])
grid = sin(grid, 1, 9, -3.8143949239238193, -90.24439830058608)
grid = magnitude(grid, 22, [13, 26, 6, 9, 7, 15, 8, 21, 12, 25, 29, 5, 23, 19], 2)
grid = magnitude(grid, 7, [15, 10, 23], 2)
grid = transit(grid, 18, [29, 8, 1, 11, 13, 9, 27, 6, 21, 4, 10, 15, 19, 5, 0], [0.1772994331856414, 0.068125216107354, 0.18999349792890638, 0.019818681800181075, 0.04415831002215933, 0.03035314916143176, 0.019871427752056706, 0.17461556101263392, 0.043587710771764196, 0.037194038159689476, 0.05795222455290955, 0.022431635860234538, 0.07352074703380847, 0.020324565267279607, 0.020753801383949444])
grid = magnitude(grid, 28, [27, 11, 1, 5, 28], 2)
grid = sin(grid, 10, 29, 0.9754517253039042, 19.167473301905645)
grid = sin(grid, 12, 27, -2.8452733457996318, 79.15482610320453)
grid = transit(grid, 23, [23, 19, 27, 29, 5, 2, 20, 0, 6, 14, 28], [0.08798444677572927, 0.12029606201225304, 0.10947313847863878, 0.12859008053676993, 0.045403922186473065, 0.12432237963799758, 0.14016659493536382, 0.04300443803477972, 0.01734694652028419, 0.0981174832644981, 0.0852945076172126])
grid = magnitude(grid, 23, [12, 14, 19, 21, 9], 2)
grid = power(grid, 29, 5, 1.817083710798804)
grid = magnitude(grid, 2, [13, 6, 29, 24, 27, 21, 16, 14, 22, 4], 2)
grid = transit(grid, 8, [3], [1.0])
grid = sin(grid, 18, 29, 0.6389415083446274, 80.8749712491909)
grid = transit(grid, 14, [25, 2, 18, 8, 3, 15, 1, 16, 14, 5, 6, 13, 20, 0, 26, 9, 22, 28, 10, 17, 4, 29, 24, 11, 7, 23], [0.005871309937873514, 0.018003505494664063, 0.004367270790055393, 0.02131452056580914, 0.04892744693923117, 0.058471392811199306, 0.07048395159287357, 0.017318473991941724, 0.07994321420066938, 0.05394716631490228, 0.03519745217167912, 0.02235005759125536, 0.04715412242850838, 0.02747045659126205, 0.07155917229027325, 0.060822977475415284, 0.04361415578730645, 0.0354280883191885, 0.005739110717730895, 0.04491271555615977, 0.04349743113332699, 0.026095715559849145, 0.026899299768024996, 0.037327346757871395, 0.012878407330765023, 0.080405237882164])
grid = sin(grid, 10, 6, 1.615810670294585, 6.059030950147061)
grid = transit(grid, 4, [21], [1.0])
grid = transit(grid, 0, [9, 6, 21, 23, 10, 25, 5, 29], [0.008407947275370496, 0.22332672029591105, 0.17669528269181908, 0.061943871236512044, 0.00631614100316715, 0.04896761458648364, 0.219980694309923, 0.25436172860081346])
grid = transit(grid, 7, [28, 3, 8, 24, 5, 26, 16, 25, 20], [0.008076733658800364, 0.13788018636125093, 0.047745229040943256, 0.08590191794838145, 0.3359021344945731, 0.13627021446299625, 0.07199274602464636, 0.05807097072801425, 0.11815986728039397])
grid = magnitude(grid, 5, [13, 16], 2)
grid = sin(grid, 23, 19, -0.6582224493825697, 87.34462867779135)
grid = sin(grid, 28, 10, 2.201883125073067, 80.07621747819877)
grid = magnitude(grid, 10, [12, 0, 4, 21, 8, 20, 3, 27, 7, 13, 6], 2)
grid = magnitude(grid, 26, [12, 16, 6, 22, 27, 20, 14, 26, 19, 18, 8], 2)
grid = transit(grid, 21, [10, 1, 21, 23, 6, 22, 7, 24, 15], [0.14098959190193464, 0.16885649738040365, 0.21508280162861007, 0.08756191883026329, 0.06797141331659777, 0.040586793475855774, 0.07556426350656567, 0.13577049344872752, 0.06761622651104154])
grid = sin(grid, 19, 21, -1.7650391823704892, 89.53123311944441)
grid = sin(grid, 27, 20, 4.102907734657698, -18.506040345024942)
grid = sin(grid, 8, 16, -3.2047717871756047, 50.031074019769875)
grid = sin(grid, 1, 3, -1.2298315940257807, 67.92621901520556)
grid = transit(grid, 10, [5, 12, 6, 7, 21], [0.04017259629004803, 0.035935993838594436, 0.38852998766486463, 0.39464597353448644, 0.14071544867200647])
grid = transit(grid, 17, [9, 22, 0, 8], [0.07232347283831883, 0.23909484436189507, 0.16476406248235922, 0.523817620317427])
grid = sin(grid, 11, 23, 3.4291605572557367, 77.65408388973503)
grid = sin(grid, 20, 27, 1.9438852600878178, -69.26160333661483)
grid = transit(grid, 19, [13, 7, 14, 12, 29], [0.15078244000703844, 0.30329951250855647, 0.052826921314074654, 0.014009457594495888, 0.47908166857583445])
grid = magnitude(grid, 4, [13, 5, 9, 16, 11, 6, 24, 14, 12, 1, 3, 22, 20, 8, 7, 15], 2)
grid = power(grid, 5, 12, 0.32534340921919336)
grid = sin(grid, 10, 18, -1.5546372261064723, 79.40807200485779)
grid = transit(grid, 0, [2, 17, 23, 0, 9, 10, 6, 20, 26, 22, 25, 11, 27, 21, 13, 12, 1, 16], [0.04666741358409691, 0.10041235530271467, 0.13656890415482237, 0.0505888093029676, 0.07654195022307062, 0.18419004471071113, 0.05046245679380782, 0.007552503418946401, 0.0004481713476168337, 0.011885682921671083, 0.032088980266198504, 0.0023404498982659153, 0.03348183036453658, 0.045952614669238355, 0.10372072735870042, 0.01789271596791753, 0.04799484234941445, 0.05120954736530277])
grid = transit(grid, 5, [25, 27], [0.5725941398341273, 0.4274058601658726])
grid = transit(grid, 19, [15, 29, 23, 21, 11, 10, 20, 4, 17, 2, 0, 13, 3, 1, 5, 8], [0.031537796589242675, 0.02689608568216389, 0.006352970412025167, 0.02945197836138472, 0.004733254055032123, 0.031841731262449186, 0.09701814809592517, 0.021578470501320998, 0.0071680768933244385, 0.11952705984922679, 0.05536518282979036, 0.06581861347697791, 0.2343306944232139, 0.10779797912646302, 0.09300120880000046, 0.06758074964145924])
grid = sin(grid, 11, 0, 2.563909435379265, 0.4450018649816627)
grid = magnitude(grid, 27, [16, 11, 8, 0, 28, 12, 17, 15, 18, 20, 26], 2)
grid = sin(grid, 19, 21, -3.4132246278785883, 84.16701903091374)
grid = sin(grid, 28, 13, -2.3675718627702755, 41.175741022703875)
grid = transit(grid, 7, [10, 9, 27, 23, 19, 5, 1, 22, 7], [0.14363062171830737, 0.01687188812140151, 0.13196113638415463, 0.17866921525288296, 0.07172903294369104, 0.1268434984434265, 0.09262190525507281, 0.13843366504033602, 0.09923903684072709])
grid = sin(grid, 1, 17, 0.4190217510777763, -96.31752118334663)
grid = sin(grid, 4, 25, -3.0130782974573114, 0.045638670109738655)
grid = sin(grid, 23, 16, -6.362468253360612, 24.730444687537883)
grid = sin(grid, 17, 14, -2.3747658845203916, -57.23440657206675)
grid = sin(grid, 19, 19, 2.4592230816940326, -51.76853764043066)
grid = magnitude(grid, 26, [4], 2)
grid = sin(grid, 0, 26, 2.879410066683457, 5.223173332129804)
grid = sin(grid, 10, 6, -3.2555765761277127, -17.443575197843472)
grid = transit(grid, 25, [24, 2, 25, 0, 12, 4], [0.03568795619526225, 0.08500737200701228, 0.05240229364632595, 0.603980978240824, 0.17712678127987705, 0.04579461863069845])
grid = sin(grid, 6, 29, -0.12051802831906497, 89.64443842624468)
grid = transit(grid, 5, [27, 16, 23, 9, 17], [0.22131895230663756, 0.07144315447485797, 0.49736096611646524, 0.13402807138531572, 0.07584885571672335])
grid = transit(grid, 12, [22, 8, 29, 16], [0.25792429467789524, 0.25168913008212207, 0.38751847922685195, 0.10286809601313074])
grid = magnitude(grid, 24, [12], 2)
grid = sin(grid, 21, 18, 6.904882453110925, 43.76686597000625)
grid = sin(grid, 27, 12, -2.3149706703321784, 91.4634229451533)
grid = transit(grid, 11, [18, 8, 23], [0.9456048289219839, 0.02282944678495521, 0.031565724293060864])
grid = sin(grid, 3, 22, -5.427035197241231, 70.63770520279803)
grid = sin(grid, 27, 15, -0.8306409707765449, 16.388610614890496)
grid = magnitude(grid, 22, [19, 20, 0, 14, 29, 16, 13, 11, 12, 7], 2)
grid = sin(grid, 22, 2, -0.2131858223375026, 23.110302271816437)
grid = transit(grid, 15, [26, 17, 18, 3, 20, 6], [0.26298407289730785, 0.036929318879447975, 0.21956318893577373, 0.12140448131206344, 0.2932362214654605, 0.06588271650994641])
grid = transit(grid, 6, [10, 0, 14, 4, 16, 26, 29], [0.3266526570756889, 0.010367316493219989, 0.06038405155138366, 0.18542143850276785, 0.15350917236048142, 0.1066459060285463, 0.1570194579879119])
grid = transit(grid, 3, [29, 9, 12, 18, 10, 17], [0.30897372209328766, 0.10630103874152365, 0.15658027364196273, 0.29474023685015555, 0.1326016707345515, 0.0008030579385190207])
grid = magnitude(grid, 11, [16, 7, 25, 22, 3, 17, 13, 0, 12, 27], 2)
grid = sin(grid, 13, 1, 2.9658129882147084, -41.317540719432344)
grid = magnitude(grid, 2, [19, 13, 16, 27, 26], 2)
grid = sin(grid, 1, 8, 6.699130217836646, 5.293135687331116)
grid = sin(grid, 0, 27, -6.580745881619362, 70.25836976864827)
grid = transit(grid, 24, [5], [1.0])
grid = sin(grid, 10, 7, -3.7620909835549288, -17.85297224969564)
grid = sin(grid, 18, 17, 6.374775580070441, -82.34320143877852)
grid = transit(grid, 27, [21, 3, 19, 27, 10, 17, 13], [0.03817904844946292, 0.12948414697169902, 0.02053094019023183, 0.17470975944365325, 0.2705479342577574, 0.164395301382941, 0.20215286930425458])

#create color space 
colors = np.zeros((6, 3)) 
colors[0] = [51, 169, 182] 
colors[1] = [8, 23, 138] 
colors[2] = [93, 97, 239] 
colors[3] = [98, 25, 66] 
colors[4] = [60, 71, 233] 
colors[5] = [191, 187, 173] 

res = np.zeros((SIZE, SIZE, 3))  
res += (grid[:,:,0:0+1].repeat(3, -1) + 1) / 2 * colors[0] 
res += (grid[:,:,1:1+1].repeat(3, -1) + 1) / 2 * colors[1] 
res += (grid[:,:,2:2+1].repeat(3, -1) + 1) / 2 * colors[2] 
res += (grid[:,:,3:3+1].repeat(3, -1) + 1) / 2 * colors[3] 
res += (grid[:,:,4:4+1].repeat(3, -1) + 1) / 2 * colors[4] 
res += (grid[:,:,5:5+1].repeat(3, -1) + 1) / 2 * colors[5] 

res = res / colors.sum(0) * 255 

#save results 
im = Image.fromarray(np.uint8(res))
im.save(os.path.basename(__file__) + '.png')
'''
#save layers
img = np.zeros((SIZE * 6, SIZE * 6))
for j in range(GRID_CHANNELS):
    x = j % 6
    y = j // 6
    img[x*SIZE:(x + 1)*SIZE, y*SIZE:(y+1)*SIZE] = grid[:,:,j]

img = (img + 1) * 127.5 
im = Image.fromarray(np.uint8(img))
im.save(os.path.basename(__file__) + '_layers.png')
'''
