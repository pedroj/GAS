# This program was generated by "Generative Art Synthesizer" 
# Generation date: 2021-11-28 02:06:28 UTC 
# GAS change date: 2021-11-28 01:31:12 UTC 
# GAS md5 hash: c291ffb9de6ad6dea37797c00163f591 
# Python version: 3.7.9 (tags/v3.7.9:13c94747c7, Aug 17 2020, 18:58:18) [MSC v.1900 64 bit (AMD64)] 
# For more information visit: https://github.com/volotat/GAS

#import python libraries 
import os #OS version: default 
import numpy as np #Numpy version: 1.19.5 
from PIL import Image #PIL version: 8.1.2 

#set initial params
SIZE = 768 
GRID_CHANNELS = 30 
def test_values(arr):
    if np.isnan(arr).any():
        raise Exception('Array has None elements!') 
        
    if np.amin(arr) < -1 or np.amax(arr) > 1:
        raise Exception('Values went to far! [ %.2f : %.2f ]'%(np.amin(arr), np.amax(arr)) ) 
           
    return arr

#define grid transformation methods

def transit(x, t_indx, s_indx, alphas):
    res = x.copy()
    res[:,:,t_indx] = np.sum(x[:,:,s_indx] * alphas, axis = -1)
    return test_values(res.clip(-1,1)) 

def sin(x, t_indx, s_indx, scale = 1, shift = 0): 
    res = x.copy()
    res[:,:,t_indx] = np.sin(x[:,:,s_indx] * 0.5 * np.pi * scale + shift)
    return test_values(res)     

def power(x, t_indx, s_indx, p = 1): 
    res = x.copy()
    res[:,:,t_indx] = np.sign(x[:,:,s_indx]) * np.abs(x[:,:,s_indx]) ** p 
    return test_values(res)   

def magnitude(x, t_indx, s_indx, ord = 2): 
    res = x.copy()
    res[:,:,t_indx] = np.linalg.norm(x[:,:,s_indx], axis = -1, ord = ord) / np.sqrt(len(s_indx))
    return test_values(res)   

#set initial grid
grid = np.zeros((SIZE, SIZE, GRID_CHANNELS))

x = ((np.arange(SIZE)/(SIZE-1) - 0.5) * 2).reshape((1, SIZE)).repeat(SIZE, 0)
y = ((np.arange(SIZE)/(SIZE-1) - 0.5) * 2).reshape((SIZE, 1)).repeat(SIZE, 1)

phi = np.pi / 4
rx = (x * np.cos(phi) - y * np.sin(phi)) / 1.5
ry = (x * np.cos(phi) + y * np.sin(phi)) / 1.5


for i in range(15):
    grid[:,:,i * 2 + 0] = x
    grid[:,:,i * 2 + 1] = y

#apply transformations to the grid
grid = transit(grid, 9, [5, 24, 15, 3], [0.5342212021626492, 0.18147076392900563, 0.055633740504602715, 0.22867429340374243])
grid = transit(grid, 26, [22, 26, 29, 19, 8, 21, 7, 10, 11, 25, 9, 0], [0.05696102197584366, 0.26285222924225504, 0.0919079612051198, 0.1687527806884494, 0.11085010574249453, 0.05902176129124312, 0.011214159943138803, 0.04445927335667039, 0.12588318336806506, 0.017264056162267945, 0.02253705125837301, 0.02829641576607929])
grid = transit(grid, 11, [18, 5, 27, 23, 0, 28, 1, 7, 10, 6, 22, 20, 12, 14], [0.13683569469872395, 0.016959388954744067, 0.03663160854125827, 0.002847112263463712, 0.1157918799233711, 0.08397448090630324, 0.14414551091367567, 0.0021601192347748058, 0.03820829976675248, 0.24869202059053816, 0.03239972241226923, 0.03675275934433129, 0.02289243524271101, 0.08170896720708293])
grid = magnitude(grid, 12, [18], 2)
grid = sin(grid, 9, 24, -0.5197749708846731, 15.854217887574976)
grid = sin(grid, 0, 24, -0.9837158181933741, -71.02392680503814)
grid = transit(grid, 13, [26, 3, 15, 22, 9], [0.06742451457475923, 0.12281320801630513, 0.04161211333159292, 0.35567601456345893, 0.41247414951388384])
grid = transit(grid, 18, [28, 8, 19, 23, 5, 10, 22, 4, 0], [0.19499065845684085, 0.16530700785043909, 0.023804434336736176, 0.11381052492943354, 0.025890588409873856, 0.03293541341724035, 0.19677542129271589, 0.07944659605729233, 0.16703935524942787])
grid = sin(grid, 15, 3, -7.8029197241866, 87.90196568906993)
grid = transit(grid, 5, [27, 22, 1], [0.23158505830919715, 0.6081254056813405, 0.16028953600946239])
grid = sin(grid, 29, 16, 2.873804394920092, 27.43482722191908)
grid = transit(grid, 8, [22, 8, 3, 2, 15, 27, 4, 0], [0.07040696946829501, 0.09245037606429185, 0.08572118214761944, 0.07904402889523246, 0.17642651560212103, 0.02251048152604197, 0.2642463926831366, 0.2091940536132616])
grid = transit(grid, 23, [21], [1.0])
grid = transit(grid, 23, [23, 9, 24, 8, 22, 26, 21, 14, 10], [0.08134327652223117, 0.19291722683799986, 0.009130363704744729, 0.06972659674300093, 0.07539663295186692, 0.10945404198606352, 0.055844354010005634, 0.25921661695123077, 0.14697089029285645])
grid = transit(grid, 11, [16, 22, 0, 6, 23], [0.11937697094300885, 0.06582896844008528, 0.10741157627327866, 0.3116438045579353, 0.395738679785692])
grid = transit(grid, 6, [17, 7, 11, 15, 14, 2, 28, 10, 12], [0.1769994584035045, 0.06251707636911402, 0.24665496513570134, 0.06595276596590365, 0.11364312885348776, 0.13900251803789462, 0.07609885164897781, 0.014977661375232813, 0.10415357421018354])
grid = transit(grid, 18, [13, 28], [0.18237735040537398, 0.817622649594626])
grid = sin(grid, 14, 21, -3.2769715256005334, 33.341014144234634)
grid = transit(grid, 27, [22, 10, 0], [0.37903105988216274, 0.027903296061249153, 0.5930656440565881])
grid = sin(grid, 13, 19, -1.0083057747035085, 45.32663709059881)
grid = sin(grid, 21, 29, -2.033902738635562, 83.18637055692568)
grid = sin(grid, 21, 20, 3.724200166863936, 64.11265315372938)
grid = power(grid, 5, 28, 0.5040698006520863)
grid = transit(grid, 27, [15, 13, 0, 23, 4, 12], [0.16836214550922596, 0.09088633645917937, 0.12832532709494834, 0.19428442145545552, 0.11551692680955276, 0.3026248426716379])
grid = transit(grid, 26, [8, 28, 19, 12], [0.12254915908883034, 0.049158806834715456, 0.2548836014126827, 0.5734084326637715])
grid = sin(grid, 8, 22, 0.28963704045629785, 14.642974186104624)
grid = transit(grid, 4, [1, 6, 11, 9, 16, 5, 7], [0.2908557143577597, 0.26104994960954353, 0.10617777722136651, 0.08395560557363395, 0.0755743561440244, 0.02055115744063781, 0.161835439653034])
grid = transit(grid, 0, [9, 29, 2, 21, 0, 11, 26, 8, 24, 28, 12, 14, 5, 27], [0.11751323724268951, 0.08606364240186842, 0.08258664640517607, 0.14599005593016762, 0.023503498981713042, 0.09960938327534487, 0.10311378807858956, 0.049182823549559086, 0.07706454488212051, 0.03182325629530442, 0.0026883278635587552, 0.09205206091316889, 0.04997214485121891, 0.03883658932952038])
grid = magnitude(grid, 4, [3, 15, 14, 4, 24], 2)
grid = power(grid, 20, 21, 0.8369247988654179)
grid = transit(grid, 19, [0, 5], [0.09676039555415433, 0.9032396044458456])
grid = sin(grid, 29, 29, -0.9643673506468063, 8.967437246119388)
grid = sin(grid, 14, 1, 0.15139570426619076, -40.59378530824198)
grid = transit(grid, 28, [26, 27, 3, 25, 9, 14, 16, 19, 21, 22, 10, 7, 6, 11], [0.03846283630801191, 0.003611165070086529, 0.016386375670539105, 0.03325226481143111, 0.07248141408219415, 0.07574051112729943, 0.025136664847969954, 0.09140666537823693, 0.11688378406685693, 0.13391881271054026, 0.19792069866332154, 0.0069953919558150965, 0.10553327699478507, 0.08227013831291184])
grid = sin(grid, 14, 17, -1.6536754594921832, -38.27968476791121)
grid = transit(grid, 3, [24, 4, 21, 13, 15, 20, 5, 2, 18, 10, 8, 26, 25, 0, 22, 29], [0.043261455138004605, 0.09701099620993626, 0.02330623238287478, 0.002034833032158639, 0.07579485773048504, 0.11071509824560882, 0.009774323938956175, 0.04781055561128071, 0.048216338072515415, 0.18253805904361245, 0.12137806592285647, 0.06336045759588786, 0.0289834486908499, 0.002438501994089762, 0.08636165041317383, 0.057015125977709254])
grid = transit(grid, 4, [23, 29, 21, 2, 3], [0.13700876091088077, 0.2143789960591354, 0.21815790353798725, 0.38176010336713523, 0.04869423612486131])
grid = transit(grid, 5, [5, 0, 12, 10, 26, 1, 3, 14, 2, 15, 7, 29, 25, 16, 8], [0.08299901497093495, 0.0007990389558318802, 0.0398269346802915, 0.09815788008041128, 0.003191584435749173, 0.016639034177236122, 0.10558028964441604, 0.05996226828205053, 0.036106635758057615, 0.13934965910622088, 0.059254497545744876, 0.1279429548882897, 0.07666322625023604, 0.03461467798520952, 0.11891230323931992])
grid = magnitude(grid, 13, [13, 18, 2, 6, 0, 24], 2)
grid = transit(grid, 3, [7, 22], [0.7008249200828205, 0.2991750799171795])
grid = transit(grid, 8, [16, 14, 0, 8, 23, 12, 13, 28], [0.054554519558812804, 0.0634083121537979, 0.061763274064731144, 0.22655341867476142, 0.26362052667155217, 0.06293326171754145, 0.024153690767067026, 0.24301299639173612])
grid = transit(grid, 12, [2, 0, 25, 4, 11, 20], [0.2135727198690867, 0.2602478929854192, 0.036054564699847955, 0.029549321664014874, 0.19439620047101405, 0.26617930031061726])
grid = sin(grid, 12, 29, -2.0606158867391033, 49.041181245520846)
grid = transit(grid, 2, [1, 18, 25, 7, 4, 28, 22, 0, 2, 29, 11, 14, 8, 21, 16, 13, 3, 9, 20, 10, 27, 26, 23, 5, 6], [0.022961767783264937, 0.05216151564895142, 0.06700378538854872, 0.004868404084079884, 0.031119815532516526, 0.06817549828378006, 0.06589765610348139, 0.06192301312443225, 0.0010172298968791822, 0.05043368611785926, 0.012663403673358928, 0.04345946859628934, 0.036083635881321866, 0.017571690463611844, 0.026917561776311466, 0.03758362471596475, 0.023367838545381096, 0.05901741741171624, 0.0377305636240221, 0.1341011079951387, 0.014123583108795754, 0.06457810005715973, 0.02429131114943675, 0.008081204440561181, 0.0348671165971368])
grid = transit(grid, 15, [27, 1, 5, 2, 22, 3, 0, 12, 8, 25, 6, 15, 23, 16, 26], [0.09276096236215951, 0.055987479578727545, 0.03389928739157258, 0.10048460322530173, 0.18808250644766542, 0.15052093262678393, 0.010305629775380134, 0.02733510312887793, 0.01962295296713035, 0.058735304839641365, 0.10684676338951316, 0.0385674598842383, 0.06631728140180648, 0.031899953317147636, 0.01863377966405387])
grid = power(grid, 17, 11, 0.6101129604159466)
grid = magnitude(grid, 24, [1, 12, 11, 17, 10, 21, 25, 4, 28, 19, 20, 3, 7, 0, 15, 27, 22, 29, 9, 18, 14, 2, 6], 2)
grid = sin(grid, 12, 19, -1.2971484605178953, 43.6253219584718)
grid = transit(grid, 2, [8, 7, 29, 26, 24], [0.050019232441529594, 0.20552781686115407, 0.20508495691807016, 0.33655248905731455, 0.20281550472193155])
grid = transit(grid, 22, [26, 4, 9, 6, 28, 23], [0.12501784549867087, 0.17854573410869207, 0.151199454897825, 0.15354236191147705, 0.282732246330031, 0.10896235725330396])
grid = transit(grid, 22, [17, 6, 27, 25, 26], [0.17138763442513022, 0.385897807116071, 0.1332857834306504, 0.1272177111376481, 0.18221106389050015])
grid = magnitude(grid, 9, [26, 13, 11, 28, 7, 18, 6, 19, 5, 25, 21, 27, 16, 9, 1, 20, 0, 15, 23], 2)
grid = sin(grid, 22, 5, 4.201204510461814, 40.04612040712763)
grid = sin(grid, 19, 23, -2.014006414093969, 82.36876582998593)
grid = transit(grid, 27, [22, 23, 7], [0.45404412320349574, 0.5035642851999552, 0.042391591596549094])
grid = transit(grid, 19, [19, 28, 27], [0.06178259935534135, 0.30030960742588425, 0.6379077932187743])
grid = sin(grid, 2, 11, -1.71578256308278, -82.65630005314819)
grid = sin(grid, 19, 21, 3.1366867450792912, -84.93839154346348)
grid = sin(grid, 3, 28, 1.37302236191729, 98.05962588321242)
grid = sin(grid, 20, 13, -2.7518816568996365, 83.8982567146225)
grid = transit(grid, 11, [22, 15, 17], [0.5298249864464857, 0.2568271935470114, 0.21334782000650296])
grid = power(grid, 14, 5, 2.4408262676094887)
grid = transit(grid, 24, [24, 6, 4, 10, 17], [0.0027748240616344835, 0.10747526529365764, 0.6622610259702931, 0.13287454330184686, 0.09461434137256781])
grid = magnitude(grid, 29, [11, 14, 6, 22], 2)
grid = sin(grid, 28, 12, 1.927354608713083, -12.448015373326655)
grid = power(grid, 17, 5, 1.0690152536243072)
grid = power(grid, 7, 26, 0.6113556322136905)
grid = transit(grid, 14, [7], [1.0])
grid = power(grid, 25, 21, 0.4864252475968893)
grid = sin(grid, 1, 6, -2.310875140198122, 56.63605560916508)
grid = sin(grid, 12, 14, 6.572104367096143, 19.46422100511556)
grid = power(grid, 2, 6, 1.2452134857106352)
grid = transit(grid, 4, [13, 10, 7, 27, 2, 4, 5, 24], [0.22348141167591426, 0.051871327264774066, 0.3198301502833227, 0.12951440211074308, 0.013943677208805948, 0.247897746708903, 0.0024775594076404026, 0.010983725339896614])
grid = magnitude(grid, 4, [17, 3, 7, 15, 23, 14, 0, 13, 24, 19, 16, 29], 2)
grid = sin(grid, 16, 19, -0.009890625113838244, -31.62952349347117)
grid = transit(grid, 29, [2, 1, 15, 13, 29, 20, 12, 28, 21, 14, 10, 24, 26, 3, 27, 25, 4, 16], [0.001913611310610904, 0.0221974839291764, 0.07249649100798512, 0.008225058795441931, 0.00936969956452074, 0.14055153571214585, 0.1421614608769809, 0.07696603874677749, 0.057585891195947134, 0.04310781483768589, 0.04904595273956045, 0.027316489600972826, 0.05579697380780524, 0.018415247618446293, 0.09690732924674401, 0.08248550422431089, 0.041493619291884, 0.053963797493003916])
grid = sin(grid, 19, 25, -1.5749947127413462, 5.481985056952851)
grid = transit(grid, 9, [8, 20, 4, 5, 7, 27, 6, 3, 2, 10, 22, 13, 18, 16, 14], [0.11171580697226094, 0.14779148171284562, 0.005323991760959894, 0.0448445090169912, 0.24211415311353443, 0.012879192736877453, 0.004273108435920738, 0.00374224842115929, 0.09488639826891304, 0.11402526834535591, 0.03957742921442171, 0.0852190153472913, 0.04074236777321982, 0.04134830299661409, 0.01151672588363467])
grid = transit(grid, 7, [3, 29, 28, 11, 27, 6], [0.01626174954585564, 0.25125489958964903, 0.07731079995542785, 0.2335606296983943, 0.15261875930168334, 0.2689931619089899])
grid = sin(grid, 2, 14, 0.6800552619819925, 17.47211561715551)
grid = sin(grid, 19, 11, 4.667405774561584, -1.6287784849059506)
grid = sin(grid, 28, 2, -5.847665232494359, 82.95526347971136)
grid = sin(grid, 12, 27, 0.20923825702377147, 32.4656754705087)
grid = power(grid, 11, 0, 1.1690162913803896)
grid = sin(grid, 27, 14, 2.1386433074177598, 77.44144993392325)
grid = sin(grid, 7, 23, 1.6125644901529133, 14.599926260775703)
grid = sin(grid, 2, 7, 1.9082351588825568, 75.9511802229386)
grid = transit(grid, 13, [26, 3, 25, 15, 18, 19, 4, 11, 28, 23, 12, 29, 16, 24], [0.060484483354069675, 0.025691031942958072, 0.03327745410834752, 0.08000433814480484, 0.021342842326285413, 0.12263805286192847, 0.09568926638221639, 0.03533862945127015, 0.05836067922149172, 0.04040146920803522, 0.20909243356931775, 0.039391367148685345, 0.0037599226906523562, 0.17452802958993713])
grid = magnitude(grid, 18, [28], 2)
grid = sin(grid, 12, 28, -0.7138080657232817, -25.17896160309101)
grid = sin(grid, 10, 25, 0.16452173461063874, 20.53144957567801)
grid = sin(grid, 24, 28, 1.7114257185269648, -16.88035665276564)
grid = sin(grid, 27, 2, 3.772271500164768, -82.70880061137858)
grid = transit(grid, 22, [26, 15, 28, 24, 9, 3, 10, 5], [0.03269781016679069, 0.10397323748266908, 0.10903911878980321, 0.24320164141735232, 0.026864124080134992, 0.037925178814216406, 0.17562538722899665, 0.27067350202003665])
grid = power(grid, 7, 25, 0.10901004341184871)
grid = sin(grid, 14, 5, -3.660166312732688, -6.696959977237952)
grid = power(grid, 13, 0, 0.49166855595544295)
grid = magnitude(grid, 28, [1, 27, 12, 17, 26, 2, 23], 2)
grid = sin(grid, 22, 19, -2.124284967368472, -2.880355919250576)
grid = transit(grid, 28, [16], [1.0])
grid = sin(grid, 12, 18, -0.34014345030008813, 60.16824179990223)
grid = sin(grid, 21, 10, -3.483170917523271, -41.903219565975114)
grid = sin(grid, 16, 16, 3.2128490769277525, -25.33424213982451)
grid = sin(grid, 26, 8, 6.849418376842019, -67.74330285285896)
grid = transit(grid, 10, [20], [1.0])
grid = transit(grid, 8, [4, 19, 1, 5, 11, 2, 23, 16, 21, 22], [0.05179731974708694, 0.12403092406110004, 0.19485036904948164, 0.10466934508452978, 0.118165512092452, 0.018467170306217893, 0.02692436478214138, 0.09593037433546091, 0.11750715806289998, 0.1476574624786296])
grid = sin(grid, 1, 22, -1.2165246282521964, 76.78894839247019)
grid = magnitude(grid, 4, [18, 4, 17, 15, 19, 27, 6, 25, 26, 3, 5, 21, 11, 12, 2, 10], 2)
grid = sin(grid, 15, 3, 0.4699840466161701, -82.17071358913408)
grid = transit(grid, 16, [11, 29, 26, 25, 9, 4, 17], [0.31066945264072526, 0.10355519610573115, 0.19982221616784535, 0.11306962683213102, 0.1381097182228766, 0.08128993039410773, 0.05348385963658277])
grid = transit(grid, 3, [16, 20, 10, 19, 21, 26, 3], [0.15369433642334232, 0.22109928006710988, 0.25923631422461896, 0.0008868462982403476, 0.06972289678696271, 0.2597049701670489, 0.03565535603267668])
grid = magnitude(grid, 7, [7, 28, 27, 4, 26, 12, 16, 19, 3, 25, 14, 5, 17, 21, 11, 9, 23, 15, 1, 24, 13, 29, 6], 2)
grid = transit(grid, 7, [17, 1, 7, 27, 26, 19], [0.23911136462030186, 0.2907280268094017, 0.0033374280741183494, 0.14814090799869886, 0.17425260420686484, 0.14442966829061465])
grid = sin(grid, 3, 12, -1.6920423533626339, -92.59904388935958)
grid = power(grid, 19, 12, 0.388695862448389)
grid = transit(grid, 24, [26, 2, 4, 20, 1, 22, 7, 14, 12, 16, 19, 6, 28], [0.03965288117909151, 0.08428158704717979, 0.05827316032627775, 0.15304473246425426, 0.11726383499640346, 0.02567204148012234, 0.08960560106280817, 0.08901190002917868, 0.051855543967372776, 0.05451549903363306, 0.06284211682978409, 0.032607385938685826, 0.1413737156452082])
grid = transit(grid, 18, [28, 12, 9, 14], [0.18464670109203463, 0.2279692779262029, 0.14517286510575678, 0.44221115587600573])
grid = transit(grid, 24, [13, 14, 21, 1, 2, 23, 16, 26, 28], [0.13610824889750922, 0.162667601398381, 0.0005027495393632268, 0.15090122658014907, 0.010027448237896362, 0.15202952044395532, 0.04235107233813056, 0.28324879645148465, 0.062163336113130734])
grid = sin(grid, 25, 3, 2.4166406413169588, -3.3426483067969315)
grid = power(grid, 11, 0, 1.162518996377438)
grid = transit(grid, 1, [7, 9, 21], [0.04496820000408554, 0.4307233308539091, 0.5243084691420052])
grid = sin(grid, 15, 17, 3.315514373963203, -4.671422634747472)
grid = sin(grid, 15, 17, -2.5156762865779276, -10.281620078059774)
grid = sin(grid, 22, 1, 2.150755584348058, 48.74011455570499)
grid = transit(grid, 19, [26, 15, 9, 3, 24, 19, 21, 8, 11, 6, 5, 13], [0.08197490696106627, 0.04242603630671729, 0.2513682413592857, 0.09438465710411338, 0.033170193730531004, 0.009296339537185058, 0.17257610274908144, 0.002094607329782745, 0.02076842886674546, 0.04741398789342127, 0.06740722805445759, 0.17711927010761286])
grid = power(grid, 5, 11, 2.200137777544162)
grid = magnitude(grid, 22, [15, 11, 5, 20, 17], 2)
grid = transit(grid, 15, [14, 7, 13, 23, 18, 22], [0.39711790660305935, 0.10005764641302994, 0.020004629332074846, 0.10136997101855946, 0.3314049281636426, 0.050044918469633895])
grid = sin(grid, 9, 15, 4.845773199913624, -25.290397520285197)
grid = sin(grid, 16, 12, -2.6676997280502635, 28.00430465697923)
grid = magnitude(grid, 14, [29, 20, 10, 21, 19, 12, 13, 3, 8], 2)
grid = transit(grid, 27, [3, 1], [0.3703813968764175, 0.6296186031235825])
grid = transit(grid, 17, [24, 6, 10, 16], [0.32014210004756527, 0.12652169108460948, 0.16777994913747443, 0.38555625973035085])
grid = sin(grid, 25, 7, -2.1426266195134454, -3.1644476332626255)
grid = transit(grid, 26, [22, 3, 19, 2], [0.009839566520220533, 0.289566642991817, 0.07746006519602204, 0.6231337252919403])
grid = sin(grid, 25, 24, 1.7620189533790476, -76.2560115530672)
grid = sin(grid, 8, 29, -5.838374035074204, 29.05291375876763)
grid = transit(grid, 28, [18, 24, 0, 14, 5], [0.11469465373343145, 0.20300150934525973, 0.3718974944510403, 0.201419646915071, 0.1089866955551974])
grid = magnitude(grid, 21, [19, 7, 24], 2)
grid = sin(grid, 0, 8, 8.0892340494222, 12.285628383225841)
grid = transit(grid, 1, [22, 1, 11], [0.06574989917865341, 0.18358002642339144, 0.7506700743979552])
grid = sin(grid, 21, 5, -5.242848986604367, -51.41853035167971)
grid = magnitude(grid, 13, [24, 17, 20, 16], 2)
grid = transit(grid, 26, [24, 25, 11, 22, 29, 8, 0, 15, 10, 26, 20, 17, 5, 21, 4], [0.005413789359371113, 0.026237865700660983, 0.03704805318109931, 0.023128801366330942, 0.07651102576538484, 0.2378008180256055, 0.01361783518301368, 0.06528900735130828, 0.05119881415330483, 0.006446599815310911, 0.11653528032841295, 0.13829919754660122, 0.14014303788419089, 0.04530810796146451, 0.017021766377940128])
grid = sin(grid, 14, 15, -0.4701982983600904, 82.11017985179095)
grid = transit(grid, 16, [11, 28, 24], [0.23650122993595926, 0.020704964799899486, 0.7427938052641412])
grid = transit(grid, 7, [10, 1, 8, 18, 5, 9, 29, 13, 17, 22, 12, 11, 24, 21, 15, 0, 27], [0.018616470504328953, 0.0850825911475122, 0.06264982377106698, 0.05495042450686669, 0.14906080454116932, 0.03208384440226264, 0.1683480881841215, 0.10921953567714807, 0.0206889408055928, 0.033974978185684096, 0.049782447160823064, 0.024808945476424628, 0.07924381952889503, 0.061513164223337365, 0.004364614930180321, 0.029102584202264768, 0.016508922752321607])
grid = transit(grid, 2, [25, 19, 11, 26, 17], [0.3331085125628427, 0.36646885049052763, 0.10160012193132573, 0.12168127271994268, 0.07714124229536128])
grid = sin(grid, 9, 14, 0.4522229355665633, 85.36781156545163)
grid = sin(grid, 20, 23, -0.9816627988417208, -25.13689221271966)
grid = transit(grid, 17, [18, 27, 15, 7, 21, 12, 9, 24, 10, 6, 8, 20, 28, 26, 4, 23, 19, 25, 3, 13, 0], [0.0031304472263436168, 0.11805321689864362, 0.05226820388182516, 0.1095229536466883, 0.09250835427168942, 0.028423035248341444, 0.10829727679690478, 0.0028656031715649914, 0.09392784028558183, 0.012228914939457335, 0.04326590538390119, 0.0022328628959505893, 0.022471276748842677, 0.013318908584401356, 0.022023162870308522, 0.02154515310751177, 0.09525739784831798, 0.009014365863849311, 0.0021387009223962678, 0.058049635860689834, 0.08945678354679001])
grid = sin(grid, 8, 20, -2.6082879093598965, -15.094623220398475)
grid = transit(grid, 17, [10], [1.0])
grid = sin(grid, 26, 29, 3.9435062432103756, -51.366228755226295)
grid = sin(grid, 2, 5, 2.036747443527743, 6.785740714186645)
grid = magnitude(grid, 17, [12, 16, 3], 2)
grid = sin(grid, 18, 3, -4.272266427000106, -54.717820157263944)
grid = sin(grid, 18, 1, 2.4457711347664963, -51.28470707041639)
grid = transit(grid, 6, [2, 26, 4, 28, 16, 5, 12, 27], [0.12700985113389443, 0.24850060617928724, 0.1197479461359056, 0.007895343344571494, 0.1500836097942013, 0.17793701202102927, 0.01584950566092926, 0.15297612573018132])
grid = transit(grid, 14, [8, 13, 24, 22, 4, 26, 2, 27, 20, 5], [0.05825211206013498, 0.1410750013698368, 0.07263428193394306, 0.2421839076160714, 0.07850795537465025, 0.09223295850374925, 0.04979683940020267, 0.13890294600267694, 0.07964834384668122, 0.04676565389205355])
grid = sin(grid, 3, 20, -7.1425621146458145, 4.892433390073748)
grid = power(grid, 16, 25, 1.025757091779618)
grid = sin(grid, 11, 11, -8.447680084430345, 78.52009884396466)
grid = transit(grid, 18, [1, 27, 4, 19, 13, 28, 22], [0.196090596431969, 0.2018563830995427, 0.1189151454845919, 0.05079997619106926, 0.04833898450983503, 0.09698775845128751, 0.2870111558317045])
grid = transit(grid, 16, [11], [1.0])
grid = transit(grid, 17, [11, 16], [0.4116681157073475, 0.5883318842926525])
grid = transit(grid, 5, [16, 19, 11, 7, 5, 0, 21, 14, 18, 29], [0.16216328534137447, 0.24569063104536942, 0.15914116909915269, 0.05272753527396052, 0.09259366556354813, 0.03266106454259135, 0.10914794659694485, 0.08860345191584623, 0.026935921009559344, 0.030335329611652785])
grid = magnitude(grid, 20, [27, 23, 11, 6, 8, 15, 2, 13, 19], 2)
grid = transit(grid, 20, [4, 8, 1], [0.46168072428263146, 0.24143517148156987, 0.2968841042357987])
grid = sin(grid, 23, 17, -2.1638272435241466, 93.38310327710718)
grid = magnitude(grid, 5, [24, 1, 23, 12, 28, 9, 13, 8, 26, 0, 5, 10, 20, 14, 11, 18, 21], 2)
grid = sin(grid, 14, 22, -2.4834258236409097, 97.49833284539238)
grid = transit(grid, 18, [25, 5, 27, 22, 20, 9], [0.0468039257280891, 0.00809238891341741, 0.22495444766030293, 0.09705113964245915, 0.27079524236424124, 0.35230285569149017])
grid = power(grid, 10, 12, 1.0024212830073127)
grid = power(grid, 5, 22, 1.837699138651208)
grid = sin(grid, 1, 3, 3.0024272635345137, -95.97067350805959)
grid = magnitude(grid, 14, [6, 18, 10, 0, 26, 29, 5, 2, 27, 9, 17, 20], 2)
grid = sin(grid, 24, 7, 6.958235774066301, 4.628116719561319)
grid = transit(grid, 15, [2, 6, 15, 18, 23, 1, 28, 24, 14, 22], [0.17703640737274956, 0.08311029650225686, 0.07183782826709151, 0.054512704538237235, 0.1534980594626415, 0.11473336723071016, 0.030291353565728107, 0.030421240416718228, 0.27031479327461033, 0.01424394936925648])
grid = sin(grid, 16, 9, 2.092059200648034, -35.061231977767775)
grid = magnitude(grid, 26, [27, 17, 1, 25, 23, 22, 11, 16, 19, 21, 0, 2, 3], 2)
grid = sin(grid, 16, 20, 4.16750169637843, -53.41381174523414)
grid = magnitude(grid, 20, [21, 10, 8, 26, 2, 9, 16, 15, 6, 12, 4, 29, 3], 2)
grid = transit(grid, 20, [10, 18, 29, 12, 16], [0.2079732389363055, 0.14527005489531053, 0.24222500251977908, 0.12969262232167655, 0.2748390813269283])
grid = sin(grid, 7, 27, -5.7039103474444675, -19.058567630893634)
grid = magnitude(grid, 10, [22], 2)
grid = sin(grid, 9, 22, -3.2160711310705272, -0.8050221946792107)
grid = sin(grid, 4, 25, -0.6969889566422832, -28.21644604065628)
grid = transit(grid, 23, [21, 29, 2], [0.035626894390122406, 0.9272325789006544, 0.03714052670922327])
grid = sin(grid, 16, 26, 4.977958185190646, -0.15346992630449563)
grid = sin(grid, 18, 19, -6.446822726205655, 94.7855991829299)
grid = transit(grid, 20, [0, 1, 9, 20, 14, 26, 18, 5, 4, 16, 8, 24, 15, 2], [0.09562367699583423, 0.05672983324495797, 0.01192007008068175, 0.08323890376727346, 0.10592086296679877, 0.21901647636221555, 0.0009477208258769893, 0.0223254869745743, 0.057054665210135795, 0.03541847517137981, 0.1903240416581729, 0.04763137894358527, 0.02803546961753482, 0.0458129381809781])
grid = sin(grid, 9, 19, -0.9889407635315997, 24.32223504232182)
grid = transit(grid, 21, [29, 4, 21, 7, 15, 0, 13, 27, 8, 12, 20], [0.02931192383935373, 0.11326032441391376, 0.11384896296954296, 0.24833032184524134, 0.07421714804443659, 0.05365568156932437, 0.036650758808108475, 0.11508028273903272, 0.06904537043614142, 0.10180592228267629, 0.044793303052228374])
grid = transit(grid, 15, [3, 13, 15, 28, 0], [0.04085868247981523, 0.4484006513318543, 0.18051139221944262, 0.18346257178667422, 0.14676670218221363])
grid = transit(grid, 15, [25, 7], [0.6081811323140845, 0.3918188676859154])
grid = sin(grid, 23, 10, -6.256511306103249, -35.41258532396398)
grid = sin(grid, 12, 14, -3.8142072543587258, 35.75088567228087)
grid = transit(grid, 4, [10, 12], [0.33950231443636597, 0.6604976855636341])
grid = sin(grid, 1, 25, 2.1238759299125336, -95.2772852561495)
grid = transit(grid, 28, [20, 4, 10, 6, 3], [0.24386150402992404, 0.15083838184066112, 0.19145797791305272, 0.231388093318498, 0.1824540428978642])
grid = transit(grid, 7, [23, 20, 1, 3, 5, 21, 18, 22], [0.2643626857088969, 0.17890685721579894, 0.025896044460318558, 0.10305550968903582, 0.2548598553727854, 0.0091183872375849, 0.15564238270552389, 0.008158277610055642])
grid = sin(grid, 3, 10, 1.3177330564237129, 3.436191387952121)
grid = magnitude(grid, 3, [0], 2)
grid = sin(grid, 2, 28, -2.1078293203826273, -38.32707680384144)
grid = sin(grid, 29, 3, -1.8519001404778574, 21.391270525290523)
grid = magnitude(grid, 18, [15, 3, 18], 2)
grid = sin(grid, 27, 7, -0.741508015430276, -59.172393162176775)
grid = transit(grid, 16, [23, 17, 10, 29, 2, 24, 27, 14, 11, 19, 1, 25, 3], [0.028284392921879394, 0.09248669714949621, 0.07629963173374153, 0.11958563867035837, 0.06331300364143823, 0.12683701963124, 0.13706866229790357, 0.04854820218014781, 0.05555529013136957, 0.03160357709775702, 0.0327764774225656, 0.09784788734120979, 0.08979351978089281])
grid = transit(grid, 1, [26, 0, 6, 17, 10], [0.06217982216364069, 0.2448818450171405, 0.40205528499611776, 0.04345678434204177, 0.2474262634810594])
grid = transit(grid, 10, [22, 23, 29, 8, 17, 2, 24, 5, 7, 13, 16], [0.2923197003634031, 0.059325477314616994, 0.022532656935592647, 0.04827298683511306, 0.01578784289561123, 0.10869131288817775, 0.07784359217687828, 0.005317767037424362, 0.2765407366466122, 0.04658414908139094, 0.04678377782517926])
grid = sin(grid, 3, 10, -2.563250603835555, 37.68747610223792)
grid = transit(grid, 14, [13, 1, 2, 25, 23, 19, 29, 20, 7, 16], [0.10347867546749172, 0.10182010237832942, 0.14518952349182726, 0.13743973384655242, 0.09283496444207104, 0.04013363918377447, 0.11958930930931748, 0.18383099423083896, 0.027931754754189842, 0.047751302895607445])
grid = sin(grid, 3, 23, -0.669123040236616, -73.9005998275474)
grid = sin(grid, 8, 6, -3.4364449595645326, 25.26944475114898)
grid = sin(grid, 2, 17, -1.1044062857252217, 16.022709129911078)
grid = transit(grid, 8, [14, 6], [0.4427928490122833, 0.5572071509877168])
grid = sin(grid, 25, 25, 4.114118730619426, -75.73021632807873)
grid = sin(grid, 0, 28, -9.708116354819225, 19.160241130900317)
grid = power(grid, 27, 27, 1.525781728991106)
grid = sin(grid, 3, 18, 1.680577421028848, -46.169300857594294)
grid = transit(grid, 20, [26, 27, 23, 11, 28, 4, 13, 12, 1, 5, 29, 2, 10, 22, 15, 21, 8, 16, 20], [0.028084441209066276, 0.006259971084431649, 0.027063434117946285, 0.03486914632592155, 0.03654381456247338, 0.05552629583909025, 0.0032695820503744104, 0.1834631119964957, 0.015094506595672857, 0.09317512760338292, 0.05100820726496779, 0.17003283759270368, 0.006918955745280075, 0.06734682325401618, 0.06827919669634373, 0.021449237264485353, 0.008557632690829358, 0.0434659287920166, 0.07959174931450201])
grid = transit(grid, 17, [16, 21, 27, 24, 22, 28, 9, 6, 17], [0.03521761284024365, 0.07969755614506543, 0.0773436660834768, 0.027110136972014073, 0.1697255914479216, 0.20818803434545932, 0.05850781462721889, 0.11498139432959012, 0.22922819320901003])
grid = transit(grid, 28, [26, 6, 7, 12, 16, 27, 14, 20, 28, 22, 24, 5, 11], [0.011503310922571066, 0.06263571972519069, 0.017516312864647086, 0.07772195647587006, 0.060786304620057734, 0.005102874660561754, 0.09536418752753578, 0.15382181939337042, 0.08268799064115688, 0.19094629043596623, 0.04274665791736918, 0.04618872222882754, 0.15297785258687563])
grid = sin(grid, 20, 26, 1.6333639445725903, -69.99629469026834)
grid = sin(grid, 27, 26, -2.8211364001313566, -73.97947283656535)
grid = transit(grid, 15, [11, 26, 16, 28, 4, 6, 18, 3, 21], [0.09479591838217964, 0.09484897523056462, 0.058845377456096325, 0.10215818594255374, 0.014456892855759598, 0.1818239455393452, 0.2121602694605715, 0.09960044042963573, 0.1413099947032936])
grid = power(grid, 11, 19, 0.9545621173071043)
grid = sin(grid, 6, 0, 1.2826764156706694, 55.5398480966673)
grid = sin(grid, 13, 3, -2.6051028087843267, 65.23875144284764)
grid = transit(grid, 1, [6, 22, 20, 10, 8, 19, 29], [0.22477925819925032, 0.047409236636423546, 0.31772687710097247, 0.052123849475215936, 0.017518542847333143, 0.10547836203202665, 0.23496387370877808])
grid = magnitude(grid, 29, [27, 5, 20, 22, 24], 2)
grid = transit(grid, 10, [7, 19, 14, 8], [0.33287816520381924, 0.38739356132482355, 0.01770059017686533, 0.2620276832944919])
grid = sin(grid, 25, 25, 4.9339749392627725, -97.54179613138774)
grid = sin(grid, 27, 9, 0.38977199023001213, 99.96740219350474)
grid = sin(grid, 5, 11, -2.4079595816059536, -80.86349376864504)
grid = transit(grid, 8, [1, 23, 28], [0.7036639741604288, 0.16488488844590868, 0.13145113739366246])
grid = sin(grid, 28, 4, -1.6662852066507081, 22.657126178267987)
grid = transit(grid, 11, [8, 6, 19, 24, 5, 29, 26, 21, 3, 23, 28, 25], [0.03763013654395128, 0.24415654984814908, 0.009186407123997854, 0.14619135231446456, 0.029468755293756744, 0.06835034032523098, 0.08331975590337455, 0.13510926534242243, 0.0428256881909377, 0.09152253462748772, 0.010604166283933125, 0.10163504820229385])
grid = sin(grid, 15, 1, -6.64220650090924, -80.19775246945564)
grid = magnitude(grid, 4, [24, 8, 9, 7, 4, 15], 2)
grid = transit(grid, 1, [24, 5, 8], [0.21817408181873374, 0.32566519402893235, 0.45616072415233394])
grid = magnitude(grid, 24, [14, 8, 3], 2)
grid = sin(grid, 3, 9, -0.3062533276448923, -60.40574503692417)
grid = sin(grid, 17, 27, 5.283304841208537, 82.14067946313853)
grid = power(grid, 2, 11, 1.2927564970430212)
grid = transit(grid, 18, [10, 29, 13, 9, 0, 2, 6, 5, 18, 26], [0.02531468958376917, 0.016789326058894778, 0.17772249485394337, 0.14517264053179316, 0.11578285385887466, 0.0653914329125764, 0.04626672091661157, 0.16440181274889515, 0.19167007016333454, 0.051487958371307214])
grid = sin(grid, 18, 2, 0.2377595491927969, -99.29084282877308)
grid = magnitude(grid, 19, [4, 27, 22, 1], 2)
grid = sin(grid, 6, 7, 0.23433369863255094, 14.665137912357508)
grid = sin(grid, 23, 15, -4.728776108215347, 71.80674278119216)
grid = sin(grid, 4, 14, 2.6743276188199734, 75.37941941718435)
grid = power(grid, 29, 16, 1.1886328571343379)
grid = sin(grid, 19, 20, 0.6062610723991769, 57.7576888548671)
grid = transit(grid, 13, [29, 25, 28, 21, 12, 26, 14, 13, 20], [0.2557589734151183, 0.06583027144046429, 0.07260037473733175, 0.0031073691438477475, 0.012450800772617447, 0.24742685061689768, 0.2557195778015838, 0.03282764907261528, 0.054278132999523734])
grid = sin(grid, 14, 10, 0.8632150815184519, 86.26962497483444)
grid = transit(grid, 12, [16, 7, 1, 18, 28, 9, 13, 26, 25, 11, 8, 24, 14, 21, 19, 15], [0.04998261297506361, 0.03624109475375478, 0.03424093518899223, 0.02735940466262786, 0.04245673029336434, 0.023675680646149812, 0.10178164969111354, 0.06248496567742079, 0.08723395665092128, 0.09571027247832861, 0.040855625717354925, 0.20231524643713716, 0.05267423212164201, 0.020266163247286063, 0.00418363575539533, 0.11853779370344768])
grid = transit(grid, 7, [23, 20, 3, 28, 2, 14, 9, 15, 25, 7, 11, 22, 27, 10, 19, 12], [0.1804825552768306, 0.010752469938652594, 0.0028390517562462583, 0.05449051744958575, 0.07647333925114896, 0.13475822323643974, 0.07317928900540165, 0.05357189222306655, 0.06986874617499345, 0.008251614292606567, 0.04853486560425, 0.022738193629601337, 0.06349499086529246, 0.013802159998896467, 0.06022405620371503, 0.1265380350932726])
grid = transit(grid, 9, [14, 29, 18, 11, 2, 28, 16, 9], [0.18292851891328793, 0.05334857863475463, 0.04320581626342237, 0.10804959687882061, 0.1140582554373515, 0.18627081896924289, 0.23154555195458051, 0.08059286294853947])
grid = transit(grid, 15, [13, 27, 6, 7, 17, 21, 8], [0.20764123608155, 0.21265909496049265, 0.029155935926625146, 0.22815119958479604, 0.05399973475040578, 0.24183718877187962, 0.026555609924250583])
grid = transit(grid, 7, [21], [1.0])
grid = sin(grid, 15, 13, 0.8705494942458696, 67.81551923425155)
grid = sin(grid, 12, 7, -1.602518324636846, 94.44039664621485)
grid = sin(grid, 20, 21, -2.4276731880559006, 1.822895606421767)
grid = sin(grid, 8, 29, 5.5789670329542735, -16.668684876071154)
grid = power(grid, 6, 3, 0.4431743752457683)
grid = sin(grid, 3, 8, -0.988333831693139, 18.13473990483365)
grid = transit(grid, 14, [17, 27, 29, 13, 9, 3, 0, 11], [0.0898903523466139, 0.1481810324875896, 0.14426080818014916, 0.10131421875105391, 0.22640591283349126, 0.07816349748645574, 0.14309141898623393, 0.06869275892841248])
grid = magnitude(grid, 24, [11, 29, 28], 2)
grid = power(grid, 15, 17, 1.4180504704167114)
grid = sin(grid, 26, 28, -0.984055927889663, 5.942245509342243)
grid = power(grid, 6, 2, 1.397099763106119)
grid = power(grid, 5, 29, 0.15952033553068445)
grid = power(grid, 27, 9, 0.6132580874099702)
grid = transit(grid, 23, [12, 15, 16, 6, 25, 14, 27, 4, 24, 18, 29, 28, 1, 23, 21, 17, 5], [0.07771264616773704, 0.09506901656991516, 0.06970063239215112, 0.008308933100567956, 0.02336269874831405, 0.01571850961324773, 0.012838839969123866, 0.03224820852612018, 0.08875649450256343, 0.08699160603840679, 0.010264410829392183, 0.11052666280336272, 0.065318557138721, 0.03976395316148982, 0.13214305502101165, 0.11526553215629681, 0.01601024326157849])
grid = transit(grid, 26, [26, 2, 8], [0.006154499932582719, 0.2188664121026967, 0.7749790879647206])
grid = sin(grid, 28, 13, 3.8788679529924632, -33.8187097952287)
grid = sin(grid, 16, 7, 3.280658024461874, -88.42823819060912)
grid = sin(grid, 24, 8, 2.2875375614066145, 35.88943385470159)
grid = power(grid, 28, 17, 0.5639477614239823)
grid = sin(grid, 18, 5, -2.366398758178388, -81.62121762443883)

#create color space 
colors = np.zeros((6, 3)) 
colors[0] = [120, 15, 53] 
colors[1] = [108, 238, 2] 
colors[2] = [92, 148, 205] 
colors[3] = [233, 190, 48] 
colors[4] = [165, 190, 85] 
colors[5] = [23, 16, 102] 

res = np.zeros((SIZE, SIZE, 3))  
res += (grid[:,:,0:0+1].repeat(3, -1) + 1) / 2 * colors[0] 
res += (grid[:,:,1:1+1].repeat(3, -1) + 1) / 2 * colors[1] 
res += (grid[:,:,2:2+1].repeat(3, -1) + 1) / 2 * colors[2] 
res += (grid[:,:,3:3+1].repeat(3, -1) + 1) / 2 * colors[3] 
res += (grid[:,:,4:4+1].repeat(3, -1) + 1) / 2 * colors[4] 
res += (grid[:,:,5:5+1].repeat(3, -1) + 1) / 2 * colors[5] 

res = res / colors.sum(0) * 255 

#save results 
im = Image.fromarray(np.uint8(res))
im.save(os.path.basename(__file__) + '.png')

#save layers
img = np.zeros((SIZE * 6, SIZE * 6))
for j in range(GRID_CHANNELS):
    x = j % 6
    y = j // 6
    img[x*SIZE:(x + 1)*SIZE, y*SIZE:(y+1)*SIZE] = grid[:,:,j]

img = (img + 1) * 127.5 
im = Image.fromarray(np.uint8(img))
im.save(os.path.basename(__file__) + '_layers.png')

